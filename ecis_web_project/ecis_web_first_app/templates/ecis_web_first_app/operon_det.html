<!DOCTYPE html>
<html>
  <head>
    <title>OPERON {{opid.operon_ID}}</title>
    <meta charset="utf-8" />
  	{% load static %}
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
  	integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href = "https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" >
  	<meta name="viewport" content = "width=device-width, initial-scale=1.0">
  	<style type="text/css">
  		html,
  		body {
  		  height:100%
  		}
  	</style>

  </head>
  <body class="body" style="background-color:#f6f6f6">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <a class="navbar-brand" href="http://www.asaflevylab.com/#" data-toggle="tooltip" data-placement="top" title="Levy Lab Huji"><img src="http://www.asaflevylab.com/labimages/levy_logo.png" style='max-height:40px;'alt="Asaf Levy Lab Logo"></a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-controls="bs-example-navbar-collapse-1" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <!-- Anything inside of collapse navbar-collapse goes into the "hamburger" -->
          <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <div class="navbar-nav">
              <a class="nav-item nav-link active" data-toggle="tooltip" data-placement="top" title="Home page for eCIStem" href="/">Home</a>
            </div> <!-- /.navbar-nav, left-hand content -->

            <!-- STUFF ON THE RIGHT -->
          </div> <!-- /.navbar-collapse -->
    </nav>
  	<div class="container-fluid" style="min-height:95%; ">
  		<div class="row">
  			  <div class="col-sm-12">
  				  <br><hr>
  				  <center>
  				  <h3> <i>operon ID: {{ opid.operon_ID }} </i> </h3>
            <h3> <i>genome ID: {{ species_list.genome_ID_x }} </i> </h3>
  				  </center>
  			  </div>
  		</div><hr>
      <div class="col-sm-12">
        <div class="card">
  			  <div class="card-body">
            <!-- <div class="alert alert-dark" role="alert">
               <b>operonID:</b> {{ opid.operon_ID }}
               <b>genomeID:</b> {{ species_list.genome_ID_x }}
            </div> -->
            <div class="alert alert-primary" role="alert">
               <i>{{ species_list.phylum }}</i>
               <i>{{ species_list.species }} {{ species_list.strain }}</i>
            </div>
  				<!-- <p class="card-title"><b>operonID:</b> {{ opid.operon_ID }}    ||    <b>genomeID:</b> {{ species_list.genome_ID_x }}</p>
  				<p class="card-text"><b>phylumName:</b> <i>{{ species_list.phylum }}</i>    ||    <b>genusName:</b> <i>{{ species_list.genus }}</i>    ||    <b>speciesName:</b> <i>{{ species_list.species }}</i>    ||    <b>strainName:</b> <i>{{ species_list.strain }}</i></p>
  			  </div> -->
            <img src="{% static opid.operon_IM.url %}" class="card-img-top" style='max-height:200px;'alt="{{opid.operon_IM}}">
            <div class="alert alert-dark" role="alert">
               {{ scaffold.scaffold }}
            </div>
          </div><hr>

          <table class="table table-striped">
            {% if genes_list %}
                <thead>
                    <tr>
                      <th scope="col">IMG Gene ID</th>
                      <th scope="col">Start Coordinate</th>
                      <th scope="col">End Coordinate</th>
                      <th scope="col">Length (aa)</th>
                      <!-- <th scope="col">scaffold</th> -->
                      <th scope="col">Locus Tag</th>
                      <th scope="col">Afp Homolog</th>
                      <th scope="col">40% Cluster Group</th>
                      <th scope="col">Pfam Domains</th>
                    </tr>
                </thead>
                <tbody>
                  {% for entry in genes_list %}
                       <tr>
                        <td><a href="https://img.jgi.doe.gov/cgi-bin/m/main.cgi?section=FindGenes&page=fgFindGenes&searchFilter=gene_oid_list&searchTerm={{ entry.gene_id }}&noErrorFlag=1&seqstatus=&domainfilter=&selectType=allIsolates&taxonChoice=allIsolates&data_type=&file=g.gene_oid_list128658" data-toggle="tooltip" data-placement="top" title="{{entry.gene_id}} IMG information">{{ entry.gene_id }}</a> </td>
                        <td>{{ entry.start_coord_x }}</td>
                        <td>{{ entry.end_coord_x }}</td>
                        <td>{{ entry.len_aa }}</td>
                        <td>{{ entry.locus_tag_x }}</td>
                        <td>{{ entry.core_whole }}</td>
                        <td><a href="{% url 'ecis_web_first_app:cluster_det' entry.clust40pg %}" data-toggle="tooltip" data-placement="top" title="{{entry.gene_id}} 40% cluster info"> {{ entry.clust40pg }} </a></td>
                        <td>{{ entry.gene_id }} <a href="{% url 'ecis_web_first_app:pfams_det' entry.gene_id %}" data-toggle="tooltip" data-placement="top" title="click to see pfam domains found in {{entry.gene_id}}">  pfam </a></td>
                      </tr>
                  {% endfor %}
                </tbody>
              </table>

            {% else %}
              <p>No Records. Table Not Created.</p>
            {% endif %}
        </div>
      </div>
    </div>
  </body>
</html>
